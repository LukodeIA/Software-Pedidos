{
  "meta": {
    "project": "Sistema de Gestión de Pedidos para Restaurantes",
    "date": "2025-12-30",
    "prepared_by": "Generated by Senior Software Architect & Full-stack Developer"
  },
  "product_overview": "Aplicación web para la gestión de pedidos en restaurantes con roles diferenciados (Cliente, Empleado, Admin) utilizando Supabase para autenticación y control de permisos, enfocada en la correcta delimitación de accesos y acciones por rol.",
  "core_goals": [
    "Definir e implementar roles claros con permisos específicos para Cliente, Empleado y Admin.",
    "Permitir al Cliente realizar pedidos sin autenticación en la página pública.",
    "Habilitar al Empleado visualizar y actualizar el estado de pedidos tras autenticación.",
    "Proveer al Admin control completo sobre pedidos, productos y gestión de usuarios mediante un panel administrativo.",
    "Garantizar la seguridad mediante validación de roles en backend y políticas RLS en Supabase.",
    "Mantener código legible, reutilizable y escalable, evitando sobreingeniería."
  ],
  "key_features": [
    "Acceso público para Clientes con menú, carrito y envío de pedidos sin login.",
    "Autenticación segura con Supabase Auth para Empleados y Admins.",
    "Panel de pedidos para Empleados con visualización y actualización de estados: pendiente, en preparación, listo, entregado.",
    "Panel administrativo para Admins con CRUD completo de productos y gestión de empleados.",
    "Control de acceso basado en roles validado tanto en frontend como backend.",
    "Configuración de Row Level Security (RLS) en Supabase para protección de datos.",
    "Generación y uso de perfiles que enlazan usuarios con roles (admin, empleado)."
  ],
  "user_flow_summary": [
    "Cliente accede a la página pública, visualiza menú, arma carrito y envía pedido sin necesidad de autenticación.",
    "Empleado inicia sesión, visualiza listado de pedidos y puede actualizar el estado de los mismos.",
    "Admin inicia sesión, accede a panel completo donde gestiona pedidos, productos y usuarios empleados.",
    "Proceso de autenticación y autorización validado con Supabase Auth y RLS antes de mostrar datos sensibles.",
    "Pedidos enviados por Clientes quedan registrados con estado inicial pendiente y detalles relevantes.",
    "Administración mediante dashboard para creación y mantenimiento de productos y usuarios autenticados."
  ],
  "validation_criteria": [
    "Clientes pueden realizar pedidos sin autenticarse ni acceder a vistas privadas.",
    "Empleados sólo acceden a la lista y detalles de pedidos sin permisos para modificar productos o usuarios.",
    "Admins tienen acceso total a gestión de pedidos, productos y empleados desde panel administrativo.",
    "Roles y permisos validados en backend con políticas RLS para proteger datos y operaciones.",
    "Pruebas end-to-end que confirman la separación clara entre vistas públicas y privadas.",
    "Capacidad para crear usuarios admin y empleado usando proceso definido y verificar accesos según rol.",
    "Código revisado para legibilidad, reutilización y escalabilidad orientada a roles.",
    "Nivel de seguridad adecuado sin sobreingeniería implementado en autenticación y control de acceso."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Tailwind CSS",
      "Supabase",
      "Lucide React",
      "Google Gemini AI"
    ],
    "features": [
      {
        "name": "Menu System",
        "description": "Displays products categorized by type with real-time price formatting in ARS ($ 0.00).",
        "files": [
          "components/Menu.tsx",
          "services/formatters.ts"
        ]
      },
      {
        "name": "Cart & Checkout",
        "description": "Allows users to add items, manage quantities, and place orders with ARS formatting for totals.",
        "files": [
          "components/Cart.tsx",
          "services/dataService.ts"
        ]
      },
      {
        "name": "Order Management (Staff/Admin)",
        "description": "Dashboard for viewing and updating order status (pending, preparing, ready, delivered).",
        "files": [
          "components/OrderList.tsx",
          "pages/Dashboard.tsx"
        ]
      },
      {
        "name": "Product Management (Admin)",
        "description": "Full CRUD for products, including AI-generated descriptions via Gemini and image uploads to Supabase Storage.",
        "files": [
          "components/ProductManager.tsx",
          "services/geminiService.ts"
        ]
      },
      {
        "name": "Employee Management (Admin)",
        "description": "System for admins to register new employees directly from the dashboard using Silent Signup.",
        "files": [
          "components/EmployeeManager.tsx",
          "services/dataService.ts"
        ]
      },
      {
        "name": "Authentication & RBAC",
        "description": "Secure login and role-based access control for Admins and Employees, with logout available in the Dashboard.",
        "files": [
          "App.tsx",
          "services/supabaseClient.ts",
          "supabase_schema.sql",
          "pages/Login.tsx",
          "components/Navbar.tsx"
        ]
      }
    ]
  }
}
